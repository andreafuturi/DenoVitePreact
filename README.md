<svg with="300px" height="auto" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 577 380"><path fill="#000" d="M0 0h577v380H0z"/><path d="M78.61 322.712c-6.632 0-10.884-3.357-11.29-8.301l-.021-.264h4.476l.02.224c.244 2.665 3.072 4.374 6.999 4.374 3.743 0 6.409-1.872 6.409-4.598v-.021c0-2.258-1.587-3.723-5.473-4.557l-3.215-.692c-5.96-1.261-8.524-4.028-8.524-8.361v-.021c.02-5.066 4.415-8.565 10.64-8.565 6.226 0 10.295 3.52 10.62 8.077l.02.285h-4.414l-.04-.265c-.387-2.4-2.686-4.15-6.247-4.13-3.438 0-5.981 1.608-5.981 4.374v.021c0 2.177 1.546 3.601 5.35 4.415l3.195.712c6.164 1.322 8.687 3.804 8.687 8.158v.02c0 5.616-4.374 9.115-11.21 9.115ZM112.49 322v-29.358h4.558V322h-4.558Zm28.589 0v-29.358h4.11l15.096 21.362h.305v-21.362h4.435V322h-4.109l-15.076-21.322h-.325V322h-4.436Zm60.368.712c-8.321 0-13.57-5.941-13.57-15.381v-.04c0-9.319 5.31-15.361 13.529-15.361 6.674 0 11.414 3.784 12.472 9.46l.041.204h-4.558l-.061-.204c-1.058-3.479-3.865-5.432-7.894-5.432-5.432 0-8.87 4.395-8.87 11.312v.041c0 7.019 3.459 11.373 8.972 11.373 4.802 0 8.077-3.032 8.118-7.548v-.651h-7.548v-3.683h12.044v3.642c0 7.446-4.984 12.268-12.675 12.268Zm47.49 0c-7.365 0-11.902-4.374-11.902-10.823v-19.247h4.557v18.901c0 4.252 2.665 7.141 7.345 7.141 4.679 0 7.324-2.889 7.324-7.141v-18.901h4.557v19.247c0 6.449-4.496 10.823-11.881 10.823Zm35.892-.712v-29.358h4.558v25.431h13.753V322h-18.311Zm38.497 0 10.6-29.358h4.923l10.6 29.358h-4.801l-2.645-7.935h-11.231L328.106 322h-4.781Zm12.879-24.211-4.212 12.614h8.789l-4.232-12.614h-.345ZM371.222 322v-29.358h11.576c6.022 0 9.765 3.499 9.765 8.952v.041c0 3.947-2.115 7.161-5.696 8.361L393.459 322h-5.27l-5.981-11.292h-6.429V322h-4.557Zm4.557-14.994h6.571c3.5 0 5.534-1.913 5.534-5.249v-.041c0-3.255-2.156-5.249-5.676-5.249h-6.429v10.539ZM415.72 322v-29.358h4.557V322h-4.557Zm36.035 0v-25.431h-9.236v-3.927h23.01v3.927h-9.216V322h-4.558Zm44.113 0v-12.024l-10.336-17.334h5.066l7.385 12.797h.346l7.386-12.797h5.065l-10.355 17.334V322h-4.557Z" fill="url(#a)"/><path fill="url(#b)" d="M176 59h220v181H176z"/><path d="M164 149.5V247h249V52H164v97.5Zm168.672-79.71c8.314 1.71 15.179 5.73 21.787 12.743 12.621 13.342 20.637 34.424 24.09 63.118.853 7.013.683 30.405-.213 37.76-2.089 16.678-6.737 32.201-12.791 42.892-2.345 4.19-6.609 10.434-7.12 10.434-.214 0-.256-1.411-.128-3.165.298-3.677-.341-9.45-1.834-16.848-2.942-14.625-9.422-26.471-21.02-38.701-11.384-11.974-31.21-21.553-50.994-24.674-14.24-2.224-30.911-2.053-54.575.47-20.125 2.138-20.807 2.181-24.132 2.01-8.315-.47-14.753-7.355-16.501-17.618-.639-3.635-.639-4.149.043-6.928 1.705-7.013 5.244-11.632 12.407-16.207 11.427-7.27 40.633-22.408 55.258-28.652 22.469-9.536 38.074-14.325 55.854-17.02.597-.128 4.562-.213 8.783-.256 5.671-.043 8.656.128 11.086.642Z" fill="#000"/><path d="M292.337 95.661c-16.713 2.224-31.508 6.628-47.966 14.155-6.566 3.036-7.376 3.848-4.562 4.575 7.418 1.968 15.093 2.737 24.942 2.523 7.462-.213 8.655-.342 13.26-1.582 11.129-2.95 16.97-8.082 19.23-16.891.341-1.369.511-2.694.383-2.865-.256-.428-1.449-.428-5.287.085Z" fill="#000"/><defs><radialGradient id="a" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(224 0 0 25 289 307)"><stop stop-color="#06EF6A"/><stop offset="1" stop-color="#00FEAD"/></radialGradient><radialGradient id="b" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="matrix(0 90.5 -110 0 286 149.5)"><stop stop-color="#00FEAD"/><stop offset="1" stop-color="#06EF6A"/></radialGradient></defs></svg>
![markup-cropped-4](https://github.com/user-attachments/assets/8ef76b38-bbde-45e0-80ee-3b264c6e91d7)

# Singularity

Singularity is a minimal, modern framework for building server-side rendered (SSR) and partially hydrated web applications with (P)React. It combines the power of Deno, JSX and Vite to deliver fast, SEO-friendly, and lightweight web apps with a focus on seamless Developer Experience.

Deno manages server-side rendering, while Vite handles client-side hydration, HMR reload and production build.

## Features

- 🔥 **Zero Setup**: Clone, code, and deploy. No boilerplate needed.
- 🖥️ **Server-Side Rendering (SSR)**: Better SEO and faster initial load by default.
- 💧 **Partial Hydration**: Easily hydrate only where necessary, saving resources.
- 🧩 **Minimal Interactivity**: Execute simple client-side logic without hydrating the component.
- 🚗 **Lightweight SPA Navigation**: SPA-like experience with just 1.5 KB of JavaScript.
- 🌐 **File-Based Routing**: Automatically map files to routes and apis.
- 🎨 **Scoped Styling**: Easiliy import CSS files for clean and modular CSS.
- 🔍 **Server-Side Data Fetch**: Fetch data from server side and pass it down like in React Server Components.
- 🤖 **Automatic static files serving:** Easily serve static assets like images and files
- 📁 **Clear separation of server code and client code**: /server/main.jsx serves client/index.jsx
- 🌟 **Preact or React**: Flexibility to choose based on your needs.
- 🔀 **Automatic Development/Production Switching**: In production minified and otpimized css and js are used.
- 🚀 **Deno Deploy Ready**: Deploy seamlessly with Deno Deploy.

And meny others coming:

- ✅ **Middleware Support**: Thanks to Deno
- ✅ **TypeScript Support**: Thanks to Deno
- ✅ **Dynamic Metadata Management**: Route-specific titles and meta tags.
- ✅ **Take away**: Easily optout of routing and hydration if not needed making the project 0kb js by default. You choose what gets in in index.jsx and what not.
- ❌ **Dynamic & Nested Routing**: Support for dynamic parameters (e.g., /post/[id]).
- ❌ **Global Error Handling**: Custom component for server errors
- ❌ **Static Site Generation (SSG)**: Smartly pre-render components for blazing-fast delivery. Server will automatically knows when he has to rerender them by checking if props changed.

## Why? 💡

- Faster, lighter, and simpler than most frameworks.
- Perfect for SEO-focused, high-performance web apps.
- Combines the best of server rendering and minimal client-side interaction.

## Getting Started

1. Clone this repository.
2. Install dependencies with `npm install`.
3. Start the application with `npm start`.
4. Visit localhost:8000 and see your code changes in real time.
5. When ready build the client-side code with `npm run build`.
6. Deploy to Deno deploy and select server/main.jsx as entry point (might add a script in package.json in the future)

## Documentation

For detailed documentation, please refer to the following files in the `docs` directory:

- [Project Structure](docs/project-structure.md)
- [Routing](docs/routing.md)
- [Special Components and Tags](docs/special-components.md)
- [Styling](docs/styling.md)
- [Change Preact to React](docs/change-preact-to-react.md)

## How it Works

Deno runs on port 8000, processing each client request through `/server/main.jsx` to render `client/index.jsx` with route-specific content. Files in `client/` are served at `yoursite.com/` (non-JSX files as static assets; JSX files rendered as routes, e.g., `about.jsx` at `/about`).

The generated index includes `client/main.jsx`, which enables client-side hydration and [optional lightweight SPA navigation](https://github.com/andreafuturi/lightweight-router) without Virtual DOM.

Vite runs on `localhost:3456/main.jsx` during development. When compiled, it’s served from `dist` at `yoursite.com/dist/index.js`, same for css files etc...
The compiled file is included in the `<head>` of `index.jsx` to enable hydration in the browser thanks to the ScriptAndCss component.
This is a smart component that will automatically switch between the compiled and non compiled files in production.

```jsx
function Index({children) {
  return (
    <html lang="en">
      <head>
        <IndexCss isDev={globalThis.dev} />
        <MainJsx isDev={globalThis.dev} />
        <Title>App Title</Title>
      </head>
      <body>
       <Menu />
       <router>
        <route path={globalThis.location.pathname}>{children}</route>
       </router>
      </body>
    </html>
  );
}
export default Index;
```

Title is an optional special component that let you have a dyamic title that changes for each route example when we're in about title will be About - App title
When your app is ready for production you can compile it with "npm run build" or "npm run preview" which will also start the server in prod mode for you to test everything.
When everything is working properly you will soon be able to deploy to denodeploy with "npm run deploy"

## Limitatations

- This is experimental and not yet tested in big applications
- You still manually need to hydrate interactive components in main.jsx but it's very easy to do it.

## Suggestions and Contributions

Your suggestions and contributions are highly appreciated! Feel free to provide feedback, report issues, or contribute to making this template even better. Stay tuned for a React version for increased compatibility.

## Future

It would be nice to implement SSG as default for no server side rendering and improve css modules
See if this works without main.jsx
Create Dynamic routes
Create a hook to perform client side js easily
maybe just a .js filed linked to the component (counter.js)

Happy coding!
